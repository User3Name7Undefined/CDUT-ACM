## Sequence

### 时空限制

C/C++/Rust/Pascal 1 秒，其他语言 2 秒

C/C++/Rust/Pascal 128 M，其他语言 256 M



### 题目大意

小⑨有一个长度为 $n$ 的正整数序列 $a$ ，你可以对这个序列做这样的操作

- 选择任意一个子序列，将这个子序列中的每个元素都减去 $1$

帮小⑨计算至少做多少次操作才能让序列变为单调不减

子序列：将原序列删去任意多个元素后形成的序列



### 输入格式

第一行为一个正整数 $n$ 表示序列元素的个数

第二行为 $n$ 个正整数，表示序列的元素



### 输出格式

一个整数，表示最少的操作次数



### 数据范围

$1\le n\le 10^6,1\le a_i\le10^9$



tips：

维护每个位置的前缀最大值和后缀最小值，**如果要修改为非递减序列，那么至少要将前缀最大值减到和后缀最小值相同**



## Segment Tree

### 时空限制

C/C++/Rust/Pascal 2 秒，其他语言 4 秒

C/C++/Rust/Pascal 512 M，其他语言 1024M



### 题目大意

小曾同学有一个正整数 $X$ ，现在小张同学有一个长度为 $n$ 的序列 $a$ 和 $m$ 次询问

每次询问会给出两个端点 $l,r$ ，你需要计算在区间 $a_l,a_r$ 中所有元素的乘积 $val_{l,r}$ ，最大的能够满足 $val_{l,r}$ 是 $X$ 的 $k$ 次方的倍数的 $k$ 是多少

形式化的有
$$
(\prod_{i=l}^ra_i) \mod X^k =0
$$

### 输入格式

第一行为一个正整数 $n$ 表示序列元素的个数和一个正整数 $X$

第二行为 $n$ 个正整数表示序列 $a$

第三行为一个正整数 $m$ 表示询问的次数

接下来 $m$ 行每行两个正整数 $l,r$ 表示询问的区间



### 输出格式

每个询问回答一行，输出一个正整数表示这个询问下的答案 $k$



### 数据范围

$1\le n\le10^5,2\le X\le 10^{9},1\le m\le 10^5,1\le a_i\le 10^9$



tips：

$O(\sqrt X+np \log a+mp)$ 做法，其中 $p$ 为 $X$ 的质因子个数（$p\le10$）， 维护区间的质因子的数量，利用前缀和做到 $O(1)$ 回答


## Diagonal

### 时空限制

C/C++/Rust/Pascal 1 秒，其他语言 2 秒

C/C++/Rust/Pascal 128 M，其他语言 256 M



### 题目大意

埃及法老有一个长宽都为 $n$ 的棋盘格，他向你发起了神圣的询问：”我现在有 $n$ 个土块需要放在格子上，并且要遵守下面的两条规则：“

- 同一列或者同一行的格子里面不能放两个土块
- 为了体现王国的美感，摆放的形状必须按照从左上到右下的对角线对称

为了避免不被抓走做壮丁，我们需要立即计算出有多少种摆法，并对 $10^9+7$ 取模



### 输入格式

第一行为一个正整数 $T$ 表示测试数据的数量

接下来 $T$ 行，每行一个正整数 $n$ 表示棋盘大小和土块个数



### 输出格式

每组测试数据输出一行，一个正整数表示摆法的数量



### 数据范围

每个测试文件包含 $T$ （$1\le T\le 10^6$） 组测试数据，每组测试数据都有：$1\le n\le 10^6$





tips：

$O(n)$ 预处理，$O(1)$ 回答

定义 $dp_i$ 表示放置 $i$ 个物品的方案数，观察知道 $dp_1=1,dp_2=2$

考虑第 $3$ 个物品的方案数，如因为要保证对称性，所以第 $3$ 个物品一定可以放在 $(3,3)$ 的位置上，那么这样的方案数为 $dp_2$ 

如果第 $3$ 个物品放在 $(3,2)$ ，则前 $2$ 个物品其中一个不能放在 $(1,2),(2,2)$ 上，只能放在 $(2,3)$ 上，则这样的方案数为 $dp_1$

同理有放在 $(3,1)$ 的方案数，手玩几次可以得到状态转移方程
$$
dp_i=(n-1)\times dp_{i-2}+dp_{i-1}
$$
其中 $(n-1)\times dp_{i-2}$ 代表了第 $i$ 个物品放在 $\sum_{j=1}^{i-1}(i,j)$ 的方案数求和，$dp_{i-1}$ 表示放在 $(i,i)$ 的方案数
