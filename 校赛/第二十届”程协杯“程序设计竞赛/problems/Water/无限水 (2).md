\documentclass[12pt,a4paper]{article}
\usepackage{amsmath, amssymb}
\usepackage{geometry}
\usepackage{fancyhdr}
\usepackage{graphicx}
\usepackage{hyperref}
\usepackage{enumitem}
% 替换 xeCJK 为 ctex 包，自动适配中文环境，无需手动设置字体（兼容 Overleaf）
\usepackage{ctex}

\geometry{margin=1in}
\pagestyle{fancy}
\fancyhf{}
\rhead{程协杯程序设计竞赛}
\lhead{我的世界之无限水源}
\rfoot{\thepage}

\begin{document}

\begin{center}
    \LARGE \textbf{F.我的世界之无限水}\\[1em]
    \large 时间限制：2 秒 \quad 内存限制：512 MB
\end{center}

\section*{题目描述}

在一个 $m \times n$ 的二维网格中（左上角为原点 $(0,0)$，行号为 $x$，列号为 $y$），
初始时会在若干个坐标 $(x_i, y_i)$ 处放置水源。每个初始水源的流量为 $5$，
水会向上下左右四个相邻格子传播，传播到相邻格子时流量会减少 $1$。
当流量降至 $0$ 时，该格子视为无水流覆盖。

\textbf{无限水源规则：}
若某格子当前流量为 $4$，且其上下左右四个相邻格子中存在至少两个流量为 $5$ 的格子
（包括初始水源和后续生成的水源），则该格子会转化为新的水源，流量更新为 $5$，
并具备与初始水源相同的传播能力。

水流传播与无限水源生成持续进行，直到没有新的格子被水流覆盖，
也没有新的无限水源生成。请你计算最终每个格子上的流量。

\section*{输入格式}

\begin{itemize}[noitemsep]
第一行一个整数$T(1\leq T\leq 100)$表示数据组数，接下来按组给出数据
对于每一组：
  \item 第一行包含三个整数 $m, n, k$（$1 \le m, n \le 15$），表示网格的行数和列数、初始水源数量。
  \item 接下来 $k$ 行，每行包含两个整数 $x_i, y_i$（$0 \le x_i < m,\ 0 \le y_i < n$），
        表示初始水源的坐标。保证坐标不重复。
\end{itemize}

\section*{输出格式}

输出m行，每行包含n个整数，表示最终每个格子的流量。

\section*{样例输入 1}
\begin{verbatim}
3 3
2
0 1
2 1
\end{verbatim}

\section*{样例输出 1}
\begin{verbatim}
9
\end{verbatim}

\section*{样例输入 2}
\begin{verbatim}
5 5
1
2 2
\end{verbatim}

\section*{样例输出 2}
\begin{verbatim}
25
\end{verbatim}

\textbf{样例说明：}
单个流量 $5$ 的水源能覆盖曼哈顿距离 $\le 4$ 的所有格子，$5\times5$ 全覆盖。

\section*{说明与要求}

\begin{itemize}[noitemsep]
  \item 水流传播与无限水源生成是同步的，即同一时刻内所有格子同时传播。
  \item 若一个格子可以通过多条路径获得不同流量，取其中的最大值。
  \item 无限水源生成仅在格子流量为 $4$ 且邻域内至少两个流量为 $5$ 的格子时触发，生成后流量更新为 $5$ 并参与后续传播。
  \item 网格边界外视为无水流，不参与传播和邻域判断。
\end{itemize}

\end{document}