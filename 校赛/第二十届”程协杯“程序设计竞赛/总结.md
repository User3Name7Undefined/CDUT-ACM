
本次程协杯在2025年11月16日举行。赛前两周，笔者打完武汉站难铜悲惨退役，随后开始准备校赛。在此之前笔者就有“把这次校赛办好点”的念头，但是个人精力非常有限，我们队只有我参与了主要工作，国际漫游队由于准备这周末的沈阳也没有太多时间顾及校赛（但是仍然非常感谢他们提供的帮助，他们做的工作是不可或缺的）。于是还有很多想要完成的事没有完成，希望后来人能把校赛办的越来越好TAT。

这次较以往主要作出了如下改进：
- 题面使用了LaTeX，做成了题目集（只是更好看，仍然有很多漏洞），控制了难度。
- 恢复了发气球，但是不区分颜色。
- 增加了赛后讲题、滚榜、颁奖环节。

目录：
- [命题](#命题)
  - [题目构成](#题目构成)
  - [题面](#题面)
  - [造数据](#造数据)
  - [排版](#排版)
  - [验题](#验题)
- [发气球](#发气球)
- [赛后环节](#赛后环节)
  - [地点选择](#地点选择)
  - [讲题](#讲题)
  - [滚榜](#滚榜)
  - [颁奖](#颁奖)
- [碎碎念](#碎碎念)

# 命题
## 题目构成
拉起出题组之后很快收到了很多“easy”题目，这些题目在赛场上被证明为并非“easy”。

虽然觉得简单题目有点多但是仍然进行了难度的区分。笔者出了两道真正的签到题、一道大模拟、一道简单树。最后，所有题目一眼看去还是比较有梯度的，不过，难题部分，由于命题组的水平限制，可能都是相似的难度。

笔者以为，**命题需要尽量让所有选手都能享受五个小时的思考、编码时间，不要让他们干坐着看不懂题目**。为了达到这个目的需要多考虑零基础选手，可能会牺牲题目难度。这个就交由命题人自己权衡吧。

## 题面
笔者似乎行使了编辑的职能，将部分题面进行了修饰与丰富，尽力统一了输入输出描述的用词。**题面风格的大致统一应当是是不可或缺的。**如果有的题面是裸题意有的题面是讲故事，显然不合适。

出题还是要加入一些有趣的元素，夹带私货之类的。ciallo～

## 造数据
由于工作流太繁琐，数据根本不仅造不完还不知道造得对不对。笔者采用的方法是每个题目写一个脚本，由主脚本决定调用哪一个，并自动打包为zip用于上传到牛客。但由于是自动打包，无法方便地直接打开测试点查看。建议：确定最后生成的数据正确后再打包。

为了造出有梯度的、涵盖多组小样例和少组大样例的数据，笔者一边修改数据生成器一边在texstudio修改数据范围并核对，这耗费了很多精力，最后还由于疏忽出现的错误数据。

因此，以后**一定要优化工作流、明确分工、积极验题**，尽量让所有人的工作量平衡（笔者这次真的累爆了）。最好把一道题目由题面到数据全都交由同一个人做，因为命题人自己是整个命题组最熟悉这道题目的人。在**写generator的时候最好写注释**，方便其他人评判数据的强度。

## 排版
> 想弄一个炫酷的超长题面。

笔者在qoj上找了几个看起来还不错的题面并且喂给chatgpt（deepseek似乎只是识别文字，但是笔者想要排版故不使用），让chatgpt生成模板。反复调试（主要是样例环境）后决定了要使用的模板和使用方法。效果还不错。题面快要弄完的时候知道了polygon能自动生成，被texstudio折磨许久的笔者悄悄碎了。

**后续如果用polygon出题可以直接导出题面，或者把我这次的LaTeX作为模板**。~~但我认为polygon没有我弄的好看。~~

## 验题
其实就是对拍。

大模拟花了很长时间拍。

由于造完数据已经非常临近比赛，所以我选择相信大家的std。

**正常的验题至少要两个以上的其他人通过这道题目。** 事先不知道解法更好，可以避免惯性思维，以多个角度思考一道题目，真正达到验题的目的。~~验题不要复制粘贴std。~~

# 发气球
首先从网络上购置气球，不区分颜色话非常便宜，25块100个还送打气筒。

**发气球需要选手的牛客id与座位号对应。**

笔者在排座位表的时候阴差阳错留了一列牛客id（主要是怕有人不记得自己的队名），于是座位表后方加上表示题目的列就能作为“气球发放表”。

机房电脑桌面（屏幕上的桌面）上有座位号，但是由于开关数十台电脑的工作量较大，且志愿者发气球的时无法看到桌面上的座位号，于是笔者在农贸购入便签贴与记号笔给显示屏后贴上了标号，并通知选手和志愿者以此为唯一座位号标识。

时刻监视提交记录，有人过题后，把座位表上对应单元格染色并让志愿者发气球。这在比赛前期压力是很大的，因为过题数量会激增。~~需要大眼观察提交是否被处理过、点开提交者的个人首页，复制id，在座位表中找到对应的id，确认通过的题目，染色，告知志愿者教室及座位号。~~

首A没有发字母气球。字母气球需要充氦气，一罐挺贵的，今年经费已经有些不足所以没有考虑。

以后发气球有两个改进方向：
- 如果使用Domjudge，可以考虑用icpctools中的气球小票机。
- 如果仍然用牛客，也许可以实时爬取牛客id-题目id-评测状态，开发一个气球小票机（牛客版）。

**总之，希望有一个气球小票机。**

以此解放技术人员的劳动力，让他们有更多时间进行高雅人士巡视/回答问题/修数据。

# 赛后环节
## 地点选择
这次借到了E1A112的阶梯教室，以后可以考虑直接在机房或者普通教室进行这些环节，地方小也比较温馨，~~而且根本没多少人来用不着那么大的教室~~。
- 机房滚榜的视野不是很好，但是可以打完立刻开始，也许能减少选手流失。
- 普通教室视野好，还能上台领奖，性价比很高。不过需要从实验楼跋涉到东教，~~一路上说说话也挺好的~~，可能有人员流失。
- 阶梯教室是普通教室super plus，非常正式，拍照上镜，但是需要所有人忍受根本没什么人来的心理落差。

为了让阶梯教室成为毋庸置疑的最优解，需要**设法让更多人参赛并且来现场颁奖**。你能做到的，对吧。

## 讲题
用overleaf花一晚上写了一个ppt，不得不说，除了不能本地运行，overleaf比texstudio强多了。由于时间紧迫，有的题解没有仔细看就直接放上去了。讲的我自己一头雾水。简单题目想讲得详细一点但是PPT上只写了一些抽象的东西，无从下手；难题还好，~~只是想传播算法之美~~。建议**以后讲题可以多准备一些图例**。虽然官方讲题多数情况是一大堆公式，但笔者自认为没有仅通过文字就能表述清楚题解意思的能力，故还是希望有图例辅助。符号是思维的锚点嘛。

另外，ppt中没有展示题面也没有进行题意的描述，选手手中也没有纸质题面，这导致讲题人无法引用题面中的信息，就算引用，选手也可能不清楚。所以**讲题ppt中需要表述题意**。

## 滚榜
耗费时间精力最大的部分，作出了很多新的尝试。

最开始很快意识到滚榜会有官方工具，于是了解到icpctools/resolver，然后开始找网上的博客。有一篇比较详细的介绍了resolver需要的数据格式，笔者打算据此~~驱使AI~~写一个脚本把牛客的数据转换为需要的格式。笔者尝试让AI阅读这个博客并写出转换的脚本，但是思考过后觉得这种方式不太可能生成正确的格式，遂放弃。

继续冲浪之后发现前不久已经有学校在办新生赛的时候开发了相关项目[MergeResolver](https://github.com/SXUas-acm-team/MergeResolver)，把牛客的榜单、提交记录合并为对应格式。这对笔者来说是一个非常好的消息，逻辑也比较好理解，于是笔者立刻动手尝试。

比赛管理界面导出的榜单（下文称为牛客榜单）没有用户id，但滚榜需要以牛客id而非昵称座位关键字，因此项目开发者的要求是：找牛客管理员导出含牛客id的榜单（下文称为管理榜单），并给出了示例（下文称为示例榜单）。笔者决定以第十八届的数据测试，并联系牛客的管理员导出榜单（下文称之为管理员榜单），经比对发现与项目给出的示例不一样（这在之后被证明无伤大雅，但是现阶段的笔者并没有注意到）。笔者首先打算将管理员榜单的格式转换为示例榜单的格式，但观察后发现，管理员榜单只是比牛客榜单多出了id信息，于是计划写一个爬虫，爬取排名界面的html，从中提取牛客id，并结合牛客榜单转换为示例榜单。在测试的过程中，由于笔者网络知识的欠缺，爬虫完全无法工作，于是项目转型为手动下载html后进行本地处理。

笔者想要给滚榜加入头像和背景图片。轻度冲浪后发现，选手照片需要保存为teams/<队伍id>/photo.png。但是目前的MergeResolver在处理数据时把所有队伍id从1开始安排，因此，队伍的id只有在比赛结束后制作滚榜时才能确定，这导致用户无法提前进行选手照片的处理。笔者提出了人生中第一个[issue](https://github.com/SXUas-acm-team/MergeResolver/issues/1)。该issue实现后，经过深度冲浪，笔者在某个项目的中找到一条没有被最终采纳的[commit](https://github.com/cn-xcpc-tools/cn-xcpc-docs/pull/16/commits/6f948f05d9cb3f13c2419bf00af3bca50cbab51f)，该commit中表示：**在resolver.bat的同目录下创建cdp文件夹，在其下放置event－feed.json、teams/、organizations/**。笔者~~驱使AI~~写了爬虫用以根据用户牛客id爬取头像，并保存为符合[icpctools数据包规范](https://ccs-specs.icpc.io/2022-07/contest_package)的形式。头像本质是校徽，因此笔者将牛客id作为学校名称，并把用户头像保存为organizations/<学校名称(也即牛客id)>/logo.png。最终，实现了头像＋背景的滚榜。

笔者将[项目](https://github.com/User3Name7Undefined/NowcoderDataProcess)上传至github。

之后举办了用于测试的热身赛，用热身赛的数据测试滚榜发现MergeResolver有锅，经过AI排查，发现是某个中间文件没有强制在每个数据项之后换行。笔者在本地让AI修复，测试成功，并提出了[issue](https://github.com/SXUas-acm-team/MergeResolver/issues/2)。

后几天，为了增加灵活性，笔者想要将格式严格匹配变为模糊匹配。在AI的帮助下找到了MergeResolver中对应的代码部分，发现原本的项目已经进行了模糊处理。于是笔者调整自己的数据处理工具，让最后输出的文件只包含MergeResolver需要的列。经过测试，成功。

之后又用之前的数据进行了若干次测试，大致熟悉了工作流。

报名表收集完毕后，笔者发现根本不需要什么html和数据处理。MergeResolver只处理牛客id、昵称、真实名称、学校这四列。只需要从报名表中提取出对应的几列并且按需组合即可。例如，在上文中提到过的将牛客id填入学校这一列以实现滚榜时显示用户头像，或者将队名填入真实名称。

在比赛结束之前，笔者用已有的提交记录进行了测试，并且根据自己对数据的理解加入了一些预料之外的数据（cjb忘记自己的账号密码所以临时换号，cpj赛时打成线上赛了），测试是成功的，一切正常。于是比赛正式结束后笔者很快完成了滚榜程序的配置。

笔者没有滚榜经验，无法进行“激动人心”的滚榜。硬着头皮完成了。

以后的滚榜，**如果使用DOMjudge，需要进行新的学习**。如果仍然使用牛客（牛客会给校赛一些赞助），可以考虑**沿用头像爬虫**，并且**务必在报名表中收集完整的个人信息**(牛客id、真实名称、昵称、学校)。

## 颁奖
来的人比较少，不过流程是完善的。这次也没啥像样的奖品~~天呐我们怎么这么穷~~。希望以后的奖牌能更正式，奖品能更丰厚。**这需要提升钞能力。**

# 碎碎念
赛时出现了如下问题：
- 由于网址写得太丑，有人输错了导致打了一整场别的比赛。
- 同上，有人打成线上赛了。
- 数据出锅了。
- 样例和题目描述的限制条件冲突了。
- 前一天晚上没睡好觉，第二天赛时大爆睡导致没及时回答线上问题。

**如果有能力一定要配置DOMjudge！！！** 这样，搭配上icpctools我们就拥有了比较完整的现场赛技术栈。

我们的oj服务器好像被学校回收了（悲）。但是或许可以考虑用自己的？笔者也希望学习一些服务器的知识，如果有这方面打算请让我围观学习。

希望程协杯越办越好，来打的人越来越多，竞赛队蒸蒸日上，大家一起圆梦算竟。

---
摸术师
2025/11/18